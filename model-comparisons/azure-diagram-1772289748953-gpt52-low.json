{
  "groups": [
    {
      "id": "grp-edge",
      "label": "Ingress / Edge"
    },
    {
      "id": "grp-app",
      "label": "Application / Compute"
    },
    {
      "id": "grp-data",
      "label": "Data / Storage"
    },
    {
      "id": "grp-sec",
      "label": "Identity & Security"
    },
    {
      "id": "grp-obs",
      "label": "Monitoring & Observability"
    }
  ],
  "services": [
    {
      "id": "svc-frontdoor",
      "name": "Azure Front Door",
      "type": "Azure Front Door",
      "category": "networking",
      "description": "Global entry point with TLS termination and routing to APIs",
      "groupId": "grp-edge"
    },
    {
      "id": "svc-apim",
      "name": "API Management",
      "type": "API Management",
      "category": "integration",
      "description": "API gateway for routing, throttling, and policy enforcement",
      "groupId": "grp-app"
    },
    {
      "id": "svc-appservice",
      "name": "App Service",
      "type": "App Service",
      "category": "app services",
      "description": "Hosts the e-commerce web app and backend APIs (catalog, cart, orders)",
      "groupId": "grp-app"
    },
    {
      "id": "svc-servicebus",
      "name": "Service Bus",
      "type": "Service Bus",
      "category": "integration",
      "description": "Queues payment processing and order state updates for reliable async workflows",
      "groupId": "grp-app"
    },
    {
      "id": "svc-sql",
      "name": "SQL Database",
      "type": "SQL Database",
      "category": "databases",
      "description": "System of record for customers, orders, payments, and inventory",
      "groupId": "grp-data"
    },
    {
      "id": "svc-redis",
      "name": "Azure Cache for Redis",
      "type": "Azure Cache for Redis",
      "category": "databases",
      "description": "Low-latency cache for sessions, cart, and hot product data",
      "groupId": "grp-data"
    },
    {
      "id": "svc-storage",
      "name": "Storage Account",
      "type": "Storage Account",
      "category": "storage",
      "description": "Stores product images, invoices/receipts, and export files",
      "groupId": "grp-data"
    },
    {
      "id": "svc-search",
      "name": "Azure Cognitive Search",
      "type": "Azure Cognitive Search",
      "category": "ai + machine learning",
      "description": "Full-text and faceted search over product catalog and inventory metadata",
      "groupId": "grp-data"
    },
    {
      "id": "svc-entra",
      "name": "Microsoft Entra ID",
      "type": "Microsoft Entra ID",
      "category": "identity",
      "description": "Customer/admin authentication and token issuance (OIDC/OAuth2)",
      "groupId": "grp-sec"
    },
    {
      "id": "svc-keyvault",
      "name": "Key Vault",
      "type": "Key Vault",
      "category": "security",
      "description": "Stores payment provider keys, connection strings, and signing secrets",
      "groupId": "grp-sec"
    },
    {
      "id": "svc-azmonitor",
      "name": "Azure Monitor",
      "type": "Azure Monitor",
      "category": "monitor",
      "description": "Central metrics and platform monitoring for the application tier",
      "groupId": "grp-obs"
    },
    {
      "id": "svc-loganalytics",
      "name": "Log Analytics",
      "type": "Log Analytics",
      "category": "monitor",
      "description": "Central log store for query, alerting, and incident investigation",
      "groupId": "grp-obs"
    }
  ],
  "connections": [
    {
      "from": "svc-frontdoor",
      "to": "svc-apim",
      "label": "Route HTTPS requests for storefront and APIs to the API gateway",
      "type": "sync"
    },
    {
      "from": "svc-apim",
      "to": "svc-entra",
      "label": "Validate bearer tokens and enforce access policies per endpoint",
      "type": "sync"
    },
    {
      "from": "svc-apim",
      "to": "svc-appservice",
      "label": "Forward authorized API calls to backend services (catalog/cart/orders)",
      "type": "sync"
    },
    {
      "from": "svc-keyvault",
      "to": "svc-appservice",
      "label": "Provide payment provider secrets and database credentials at runtime",
      "type": "sync"
    },
    {
      "from": "svc-appservice",
      "to": "svc-sql",
      "label": "Read/write customer, cart, order, inventory, and payment records",
      "type": "sync"
    },
    {
      "from": "svc-appservice",
      "to": "svc-redis",
      "label": "Cache sessions, carts, and hot product detail lookups",
      "type": "sync"
    },
    {
      "from": "svc-appservice",
      "to": "svc-storage",
      "label": "Upload and retrieve product images, invoices, and order exports",
      "type": "sync"
    },
    {
      "from": "svc-appservice",
      "to": "svc-search",
      "label": "Execute product search queries with filters, facets, and sorting",
      "type": "sync"
    },
    {
      "from": "svc-appservice",
      "to": "svc-search",
      "label": "Publish catalog updates to keep search index in sync with product changes",
      "type": "optional"
    },
    {
      "from": "svc-appservice",
      "to": "svc-servicebus",
      "label": "Enqueue payment authorization/capture and order confirmation tasks",
      "type": "async"
    },
    {
      "from": "svc-servicebus",
      "to": "svc-appservice",
      "label": "Deliver payment outcome events to update order state and notify user",
      "type": "async"
    },
    {
      "from": "svc-appservice",
      "to": "svc-azmonitor",
      "label": "Emit application metrics and traces for request latency and dependency health",
      "type": "sync"
    },
    {
      "from": "svc-azmonitor",
      "to": "svc-loganalytics",
      "label": "Centralize logs for querying, alert rules, and incident triage",
      "type": "sync"
    }
  ],
  "workflow": [
    {
      "step": 1,
      "description": "Customer opens the storefront; traffic is terminated and routed to the API layer.",
      "services": [
        "svc-frontdoor",
        "svc-apim"
      ]
    },
    {
      "step": 2,
      "description": "User signs in; API gateway validates tokens and applies auth policies.",
      "services": [
        "svc-apim",
        "svc-entra"
      ]
    },
    {
      "step": 3,
      "description": "Backend loads product listings and details, using cache to reduce database reads.",
      "services": [
        "svc-appservice",
        "svc-redis",
        "svc-sql"
      ]
    },
    {
      "step": 4,
      "description": "Customer searches the catalog; backend queries the search index for results and facets.",
      "services": [
        "svc-appservice",
        "svc-search"
      ]
    },
    {
      "step": 5,
      "description": "Customer places an order; backend persists the order and enqueues payment processing.",
      "services": [
        "svc-appservice",
        "svc-sql",
        "svc-servicebus"
      ]
    },
    {
      "step": 6,
      "description": "Payment processing completes asynchronously; order status is updated accordingly.",
      "services": [
        "svc-servicebus",
        "svc-appservice",
        "svc-sql"
      ]
    },
    {
      "step": 7,
      "description": "Order artifacts (invoice/receipt) are stored and later retrieved for customer view.",
      "services": [
        "svc-appservice",
        "svc-storage"
      ]
    },
    {
      "step": 8,
      "description": "Application telemetry is collected and centralized for monitoring and troubleshooting.",
      "services": [
        "svc-appservice",
        "svc-azmonitor",
        "svc-loganalytics"
      ]
    }
  ],
  "metrics": {
    "promptTokens": 1392,
    "completionTokens": 2319,
    "totalTokens": 3711,
    "elapsedTimeMs": 52941,
    "model": "gpt-5.2"
  },
  "metadata": {
    "prompt": "E-commerce platform with payments and search",
    "model": "gpt-5.2",
    "modelDisplayName": "GPT-5.2",
    "reasoningEffort": "low",
    "metrics": {
      "promptTokens": 1392,
      "completionTokens": 2319,
      "totalTokens": 3711,
      "elapsedTimeMs": 52941,
      "model": "gpt-5.2"
    },
    "savedAt": "2026-02-28T14:42:29.103Z",
    "source": "model-comparison"
  }
}