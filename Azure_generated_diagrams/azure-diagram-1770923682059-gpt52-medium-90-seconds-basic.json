{
  "nodes": [
    {
      "id": "grp-edge-client",
      "type": "groupNode",
      "position": {
        "x": -30,
        "y": 1045
      },
      "data": {
        "label": "Client + Edge"
      },
      "style": {
        "width": 1020,
        "height": 585
      },
      "width": 1020,
      "height": 585,
      "positionAbsolute": {
        "x": -30,
        "y": 1045
      }
    },
    {
      "id": "grp-app-api",
      "type": "groupNode",
      "position": {
        "x": 450,
        "y": -5
      },
      "data": {
        "label": "Application + API"
      },
      "style": {
        "width": 1020,
        "height": 1160
      },
      "width": 1020,
      "height": 1160,
      "positionAbsolute": {
        "x": 450,
        "y": -5
      }
    },
    {
      "id": "grp-data",
      "type": "groupNode",
      "position": {
        "x": 1510,
        "y": -30
      },
      "data": {
        "label": "Data Layer"
      },
      "style": {
        "width": 540,
        "height": 710
      },
      "width": 540,
      "height": 710,
      "positionAbsolute": {
        "x": 1510,
        "y": -30
      }
    },
    {
      "id": "grp-security-ops",
      "type": "groupNode",
      "position": {
        "x": 1510,
        "y": 570
      },
      "data": {
        "label": "Security + Observability"
      },
      "style": {
        "width": 540,
        "height": 1085
      },
      "width": 540,
      "height": 1085,
      "positionAbsolute": {
        "x": 1510,
        "y": 570
      }
    },
    {
      "id": "svc-frontdoor",
      "type": "azureNode",
      "position": {
        "x": 180,
        "y": 305
      },
      "data": {
        "label": "Azure Front Door",
        "iconPath": "/Azure_Public_Service_Icons/Icons/networking/azure-front-door.svg",
        "pricing": {
          "estimatedCost": 35,
          "tier": "Standard",
          "skuName": "Standard",
          "quantity": 1,
          "region": "eastus2",
          "unit": "1/Hour",
          "lastUpdated": "2026-02-12T19:14:08.480Z",
          "isCustom": false,
          "isUsageBased": true
        }
      },
      "parentNode": "grp-edge-client",
      "extent": "parent",
      "width": 165,
      "height": 111,
      "positionAbsolute": {
        "x": 150,
        "y": 1350
      }
    },
    {
      "id": "svc-swa",
      "type": "azureNode",
      "position": {
        "x": 660,
        "y": 305
      },
      "data": {
        "label": "Azure Static Web Apps",
        "iconPath": "/Azure_Public_Service_Icons/Icons/web/01007-icon-service-Static-Apps.svg",
        "pricing": {
          "estimatedCost": 9,
          "tier": "Standard",
          "skuName": "Standard",
          "quantity": 1,
          "region": "eastus2",
          "unit": "per instance/month",
          "lastUpdated": "2026-02-12T19:14:08.479Z",
          "isCustom": false,
          "isUsageBased": true
        }
      },
      "parentNode": "grp-edge-client",
      "extent": "parent",
      "width": 171,
      "height": 132,
      "positionAbsolute": {
        "x": 630,
        "y": 1350
      }
    },
    {
      "id": "svc-apim",
      "type": "azureNode",
      "position": {
        "x": 180,
        "y": 580
      },
      "data": {
        "label": "API Management",
        "iconPath": "/Azure_Public_Service_Icons/Icons/integration/api-management.svg",
        "pricing": {
          "estimatedCost": 50.26,
          "tier": "Developer",
          "skuName": "Developer",
          "quantity": 1,
          "region": "eastus2",
          "unit": "1/Hour",
          "lastUpdated": "2026-02-12T19:14:08.481Z",
          "isCustom": false,
          "isUsageBased": true
        }
      },
      "parentNode": "grp-app-api",
      "extent": "parent",
      "width": 165,
      "height": 111,
      "positionAbsolute": {
        "x": 630,
        "y": 575
      }
    },
    {
      "id": "svc-appservice",
      "type": "azureNode",
      "position": {
        "x": 660,
        "y": 505
      },
      "data": {
        "label": "App Service",
        "iconPath": "/Azure_Public_Service_Icons/Icons/app services/app-service.svg",
        "pricing": {
          "estimatedCost": 69.35,
          "tier": "S1",
          "skuName": "S1",
          "quantity": 1,
          "region": "eastus2",
          "unit": "1 Hour",
          "lastUpdated": "2026-02-12T19:14:08.426Z",
          "isCustom": false,
          "isUsageBased": false
        }
      },
      "parentNode": "grp-app-api",
      "extent": "parent",
      "width": 128,
      "height": 111,
      "positionAbsolute": {
        "x": 1110,
        "y": 500
      }
    },
    {
      "id": "svc-postgres",
      "type": "azureNode",
      "position": {
        "x": 180,
        "y": 180
      },
      "data": {
        "label": "Azure Database for PostgreSQL",
        "iconPath": "/Azure_Public_Service_Icons/Icons/databases/10123-icon-service-Azure-Database-MariaDB-Server.svg",
        "pricing": {
          "estimatedCost": 109.86,
          "tier": "Backup LRS",
          "skuName": "Backup LRS",
          "quantity": 1,
          "region": "eastus2",
          "unit": "1 GiB/Month",
          "lastUpdated": "2026-02-12T19:14:08.480Z",
          "isCustom": false,
          "isUsageBased": true
        }
      },
      "parentNode": "grp-data",
      "extent": "parent",
      "width": 171,
      "height": 132,
      "positionAbsolute": {
        "x": 1690,
        "y": 150
      }
    },
    {
      "id": "svc-storage",
      "type": "azureNode",
      "position": {
        "x": 180,
        "y": 430
      },
      "data": {
        "label": "Storage Account",
        "iconPath": "/Azure_Public_Service_Icons/Icons/storage/storage-account.svg",
        "pricing": {
          "estimatedCost": 14.6,
          "tier": "Hot LRS",
          "skuName": "Hot LRS",
          "quantity": 1,
          "region": "eastus2",
          "unit": "10K",
          "lastUpdated": "2026-02-12T19:14:08.426Z",
          "isCustom": false,
          "isUsageBased": true
        }
      },
      "parentNode": "grp-data",
      "extent": "parent",
      "width": 163,
      "height": 111,
      "positionAbsolute": {
        "x": 1690,
        "y": 400
      }
    },
    {
      "id": "svc-keyvault",
      "type": "azureNode",
      "position": {
        "x": 180,
        "y": 180
      },
      "data": {
        "label": "Key Vault",
        "iconPath": "/Azure_Public_Service_Icons/Icons/security/key-vault.svg",
        "pricing": {
          "estimatedCost": 21.9,
          "tier": "Standard",
          "skuName": "Standard",
          "quantity": 1,
          "region": "eastus2",
          "unit": "10K",
          "lastUpdated": "2026-02-12T19:14:08.480Z",
          "isCustom": false,
          "isUsageBased": false
        }
      },
      "parentNode": "grp-security-ops",
      "extent": "parent",
      "width": 120,
      "height": 111,
      "positionAbsolute": {
        "x": 1690,
        "y": 750
      }
    },
    {
      "id": "svc-entra",
      "type": "azureNode",
      "position": {
        "x": 180,
        "y": 480
      },
      "data": {
        "label": "Microsoft Entra ID",
        "iconPath": "/Azure_Public_Service_Icons/Icons/identity/10340-icon-service-Entra-Identity-Roles-and-Administrators.svg",
        "pricing": {
          "estimatedCost": 6,
          "tier": "Standard",
          "skuName": "Standard",
          "quantity": 1,
          "region": "eastus2",
          "unit": "per instance/month",
          "lastUpdated": "2026-02-12T19:14:08.480Z",
          "isCustom": false,
          "isUsageBased": false
        }
      },
      "parentNode": "grp-security-ops",
      "extent": "parent",
      "width": 171,
      "height": 132,
      "positionAbsolute": {
        "x": 1690,
        "y": 1050
      }
    },
    {
      "id": "svc-appinsights",
      "type": "azureNode",
      "position": {
        "x": 180,
        "y": 780
      },
      "data": {
        "label": "Application Insights",
        "iconPath": "/Azure_Public_Service_Icons/Icons/monitor/application-insights.svg",
        "pricing": {
          "estimatedCost": 0.1,
          "tier": "Basic",
          "skuName": "Basic",
          "quantity": 1,
          "region": "eastus2",
          "unit": "1 GB/Month",
          "lastUpdated": "2026-02-12T19:14:08.481Z",
          "isCustom": false,
          "isUsageBased": false
        }
      },
      "parentNode": "grp-security-ops",
      "extent": "parent",
      "width": 171,
      "height": 132,
      "positionAbsolute": {
        "x": 1690,
        "y": 1350
      }
    }
  ],
  "edges": [
    {
      "id": "edge-0",
      "source": "svc-frontdoor",
      "target": "svc-swa",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Route browser requests for React assets to Static Web Apps origin",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {},
      "data": {
        "connectionType": "sync",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-1",
      "source": "svc-frontdoor",
      "target": "svc-apim",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Route /api calls to API Management endpoint with WAF/TLS enforced",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {},
      "data": {
        "connectionType": "sync",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-2",
      "source": "svc-swa",
      "target": "svc-entra",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Initiate user sign-in and obtain access token for API calls",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {},
      "data": {
        "connectionType": "sync",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-3",
      "source": "svc-apim",
      "target": "svc-entra",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Validate JWT access tokens and enforce API scopes/claims via policy",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {},
      "data": {
        "connectionType": "sync",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-4",
      "source": "svc-apim",
      "target": "svc-appservice",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Forward authenticated requests to Node.js API backend with header normalization",
      "markerStart": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {},
      "data": {
        "connectionType": "sync",
        "direction": "reverse",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-5",
      "source": "svc-appservice",
      "target": "svc-postgres",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Execute SQL queries and transactions for application domain data",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {},
      "data": {
        "connectionType": "sync",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-6",
      "source": "svc-appservice",
      "target": "svc-storage",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Upload/download image blobs and generate image URLs for clients",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {},
      "data": {
        "connectionType": "sync",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-7",
      "source": "svc-appservice",
      "target": "svc-keyvault",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Retrieve database connection string and storage credentials at runtime",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {},
      "data": {
        "connectionType": "sync",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-8",
      "source": "svc-appservice",
      "target": "svc-appinsights",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Send request traces, dependency metrics, and custom events",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {
        "strokeDasharray": "5, 5"
      },
      "data": {
        "connectionType": "async",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    },
    {
      "id": "edge-9",
      "source": "svc-swa",
      "target": "svc-appinsights",
      "sourceHandle": "right",
      "targetHandle": "left",
      "animated": false,
      "type": "editableEdge",
      "label": "Send frontend page views, JS errors, and performance telemetry",
      "markerEnd": {
        "type": "arrowclosed",
        "color": "#0078d4"
      },
      "labelStyle": {
        "fontSize": 14,
        "fill": "#333",
        "fontWeight": "bold"
      },
      "labelBgStyle": {
        "fill": "white",
        "fillOpacity": 0.9,
        "stroke": "#000",
        "strokeWidth": 1.5
      },
      "style": {
        "strokeDasharray": "5, 5"
      },
      "data": {
        "connectionType": "async",
        "direction": "forward",
        "baseFlowAnimated": true,
        "flowAnimated": true,
        "flowMode": "directional",
        "labelOffsetX": 0,
        "labelOffsetY": 0
      }
    }
  ],
  "viewport": {
    "x": 782.1478733926805,
    "y": 128.60286844708207,
    "zoom": 0.6478733926805144
  },
  "metadata": {
    "architectureName": "Untitled Architecture",
    "author": "Azure Architect",
    "version": "1.0",
    "date": "2026-02-12",
    "savedAt": "2026-02-12T19:14:42.059Z"
  },
  "workflow": [
    {
      "step": 1,
      "description": "User accesses the web application; edge routing delivers React assets over HTTPS.",
      "services": [
        "svc-frontdoor",
        "svc-swa"
      ]
    },
    {
      "step": 2,
      "description": "Frontend triggers sign-in; Microsoft Entra ID authenticates the user and returns tokens.",
      "services": [
        "svc-swa",
        "svc-entra"
      ]
    },
    {
      "step": 3,
      "description": "Frontend calls backend endpoints via the edge; API requests are routed to API Management.",
      "services": [
        "svc-frontdoor",
        "svc-apim"
      ]
    },
    {
      "step": 4,
      "description": "API Management validates the access token against Entra ID and applies throttling/policies.",
      "services": [
        "svc-apim",
        "svc-entra"
      ]
    },
    {
      "step": 5,
      "description": "API Management forwards the authorized request to the Node.js API running on App Service.",
      "services": [
        "svc-apim",
        "svc-appservice"
      ]
    },
    {
      "step": 6,
      "description": "Node.js API loads required secrets (DB and storage credentials) from Key Vault.",
      "services": [
        "svc-appservice",
        "svc-keyvault"
      ]
    },
    {
      "step": 7,
      "description": "Node.js API reads/writes relational data in PostgreSQL to fulfill the request.",
      "services": [
        "svc-appservice",
        "svc-postgres"
      ]
    },
    {
      "step": 8,
      "description": "For image operations, the API uploads or retrieves blobs from the Storage Account and returns references to the client.",
      "services": [
        "svc-appservice",
        "svc-storage"
      ]
    },
    {
      "step": 9,
      "description": "Frontend and API emit telemetry for monitoring, tracing, and troubleshooting.",
      "services": [
        "svc-swa",
        "svc-appservice",
        "svc-appinsights"
      ]
    }
  ],
  "architecturePrompt": "A web application with a React frontend, Node.js backend API, PostgreSQL database, and blob storage for images"
}